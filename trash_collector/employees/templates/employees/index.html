{% extends 'employees\employee_base.html' %}

{% block title %}{% block header %} Employee Home {% endblock %}{% endblock %}

{% block content %}
  {% if user.is_authenticated %}  
    Hello Employee {{ logged_in_employee.name}}! Team Zip-Code: {{logged_in_employee.zip_code}}
    <br>
    <br>
    <h2>Scheduled Trash Pickups for {{weekday}} | {{today}} </h2>
    <br>

    <!--? Creates a table of customers with pickups scheduled -->
    <table class="table table-hover table-dark text-center">
      <thead>
        <th scope="col">Customer Name</th>
        <th scope="col">Customer Address</th>

        <!-- TODO: Add customer profile -->
        <!-- {% comment "col customer info" %}
        <th scope="col">Customer Info</th>
        {% endcomment %} -->

        <th scope="col">Confirm Pickup</th>
      </thead>
      <!--? For each customer in scheduled_pickup populate row with data -->
      <tbody>
        <tr>{% for customer in scheduled_pickup %}</tr>
        <td>{{customer.name}}</td>
        <td>{{customer.address}} {{customer.zip_code}}</td>

        <!-- TODO: Add link to customer profile -->
        <!-- {% comment 'table - link to customer profile' %}
        <td>
          <a href="{% url 'employees:customer_info' customer.id %}">
            <i class="fas fa-address-card fa-3x"></i>
          </a>
        </td>
        {% endcomment %} -->

        <td>
          <a href="{% url 'employees:trash_picked_up' customer.id %}">
          <button type="button" class="btn btn-m btn-success">Confirm</button>
          </a>
        </td>
      </tbody>
      {% endfor %}
    </table>
    <br>
    
    <!-- TODO: Create seperate page for selected customer info + map| customer_info.html -->
    <!-- TODO: Create seperate page for all customers + map | my_customers.html  -->

    <!-- TODO: Create seperate page for filter | filtered_customers.html -->
    <h2>Filter Customer Scheduled Pickups by Weekday:</h2>
    <p>Please select a weekeday from the dropdown list to view customers who have pickups scheduled</p>
    <!-- TODO: Change to dropdown instead of select -->
    <form action="{% url 'employees:filter_by_day' %}" method='post'>
      {% csrf_token %}
      <label for="Weekday">Choose a day:</label>
      <select name="Weekday" id="Weekday">
        <option value="Monday">Monday</option>
        <option value="Tuesday">Tuesday</option>
        <option value="Wednesday">Wedesday</option>
        <option value="Thursday">Thursday</option>
        <option value="Friday">Friday</option>
        <option value="Saturday">Saturday</option>
        <option value="Sunday">Sunday</option>
      </select>
      <br><br>
      <input type="submit" value="Submit">
    </form>
    
    {% if filter_by_day != '' %}
    <ul>
      <table class="employee-customer-tb">
        <tbody>
          {% for customer in filter_customers %}
            <th scope="row"></th>
            <td>{{customer.name}} | {{customer.address}}, {{customer.zip_code}}</td>
          </tr>
        </tbody>
          {% endfor %}
      </table>
    {% endif %}

  {% else %}
    <p>You are at the employee index, but you are not logged in.</p>
    <a href="{% url 'login' %}">Log In</a>
    <a href="{% url 'accounts:register' %}">Sign Up</a>
  {% endif %}
{% endblock %}